{% extends 'base.html' %}

{% block body %}
<div class="min-h-full flex flex-col">
    <!-- Top Navigation Bar (Jira-like Header) -->
    <nav class="bg-gray-800 text-white p-4 shadow-md flex items-center justify-between">
        <div class="flex items-center">
            <a href="{{ url_for('index') }}" class="text-xl font-bold mr-6">All-in-One Planner</a>
            <!-- Desktop Nav Links -->
            <div class="hidden md:flex space-x-4">
                {% if session.get('user_id') %}
                    {% if session.get('is_admin') %}
                        <a href="{{ url_for('admin_dashboard') }}" class="hover:text-gray-300">Admin  Dashboard</a>
                    {% else %}
                        <a href="{{ url_for('dashboard') }}" class="hover:text-gray-300">Dashboard</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-button" class="md:hidden text-gray-300 hover:text-white focus:outline-none focus:text-white" aria-label="Toggle mobile menu">
            <i class="fas fa-bars text-xl"></i>
        </button>
        <div class="flex items-center space-x-4">
            {% if session.get('user_id') %}
                <span class="text-sm hidden sm:inline">Welcome, {{ session.get('name') }}</span>
                <a href="{{ url_for('logout') }}" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm">Logout</a>
            {% else %}
                <a href="{{ url_for('login') }}" class="hover:text-gray-300">Login</a>
                <a href="{{ url_for('register') }}" class="hover:text-gray-300">Register</a>
            {% endif %}
        </div>
    </nav>

    <!-- Mobile Menu (Hidden by default) -->
    <div id="mobile-menu" class="hidden md:hidden bg-gray-800 text-white py-2 px-4 shadow-md">
        <div class="flex flex-col space-y-2">
            {% if session.get('user_id') %}
                {% if session.get('is_admin') %}
                    <a href="{{ url_for('admin_dashboard') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md">Admin Dashboard</a>
                {% else %}
                    <a href="{{ url_for('dashboard') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md">Dashboard</a>
                {% endif %}
            {% endif %}
            {% if not session.get('user_id') %}
                <a href="{{ url_for('login') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md">Login</a>
                <a href="{{ url_for('register') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md">Register</a>
            {% endif %}
        </div>
    </div>

    <div class="flex flex-1">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-gray-900 text-gray-300 p-4 flex-shrink-0 shadow-lg hidden md:block">
            <nav>
                <ul class="space-y-2">
                    {% if session.get('user_id') %}
                        {% if session.get('is_admin') %}
                            <li><a href="{{ url_for('admin_dashboard') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'admin_dashboard' else '' }}"><i class="fas fa-tachometer-alt mr-2"></i> Admin Dashboard</a></li>
                            <li><a href="{{ url_for('manage_users') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'manage_users' else '' }}"><i class="fas fa-users mr-2"></i> Manage Users</a></li>
                            <li><a href="{{ url_for('manage_announcements') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'manage_announcements' else '' }}"><i class="fas fa-bullhorn mr-2"></i> Manage Announcements</a></li>
                            <li><a href="{{ url_for('manage_resources') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'manage_resources' else '' }}"><i class="fas fa-book mr-2"></i> Manage Resources</a></li>
                            <li><a href="{{ url_for('manage_tasks') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'manage_tasks' else '' }}"><i class="fas fa-tasks mr-2"></i> Manage Tasks</a></li>
                            <li><a href="{{ url_for('manage_requests') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'manage_requests' else '' }}"><i class="fas fa-code-branch mr-2"></i> Manage Requests</a></li>
                        {% else %}
                            <li><a href="{{ url_for('dashboard') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'dashboard' else '' }}"><i class="fas fa-tachometer-alt mr-2"></i> Dashboard</a></li>
                            <li><a href="{{ url_for('tasks') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'tasks' else '' }}"><i class="fas fa-tasks mr-2"></i> Tasks</a></li>
                            <li><a href="{{ url_for('announcements') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'announcements' else '' }}"><i class="fas fa-bullhorn mr-2"></i> Announcements</a></li>
                            <li><a href="{{ url_for('resources') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'resources' else '' }}"><i class="fas fa-book mr-2"></i> Resources</a></li>
<li>
  <a class="block px-3 py-2 rounded-md opacity-50 cursor-not-allowed pointer-events-none">
    <i class="fas fa-users mr-2"></i>Team Workspace
  </a>
</li>
<li>
  <a class="block px-3 py-2 rounded-md opacity-50 cursor-not-allowed pointer-events-none">
    <i class="fas fa-tasks mr-2"></i>Project Planning
  </a>
</li>

                            <li><a href="{{ url_for('my_requests') }}" class="block hover:bg-gray-700 px-3 py-2 rounded-md {{ 'sidebar-active-link' if request.endpoint == 'my_requests' else '' }}"><i class="fas fa-clipboard-list mr-2"></i> My Requests</a></li>
                        {% endif %}
                    {% endif %}
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-8 overflow-y-auto">
            {% block dashboard_content %}{% endblock %}
        </main>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuButton && mobileMenu) {
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
        }
    });
</script>
{% endblock %}